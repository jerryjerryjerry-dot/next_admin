# PNPM è½¬æ¢å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„è½¬æ¢

### ğŸ“¦ åŒ…ç®¡ç†å™¨ç»Ÿä¸€
- æ‰€æœ‰é¡¹ç›®æ–‡ä»¶å·²ä» `npm`/`npx` è½¬æ¢ä¸º `pnpm`
- ç§»é™¤äº† Turbo ç›¸å…³é…ç½®ï¼Œæé«˜æ„å»ºç¨³å®šæ€§
- æ·»åŠ äº† Windows å…¼å®¹æ€§æ”¯æŒï¼ˆcross-envï¼‰

### ğŸ› ï¸ æ›´æ–°çš„æ–‡ä»¶

#### æ ¸å¿ƒé…ç½®
- âœ… `package.json` - æ‰€æœ‰è„šæœ¬å‘½ä»¤æ›´æ–°ä¸º pnpm
- âœ… `Dockerfile` - Docker æ„å»ºä½¿ç”¨ pnpm
- âœ… `docker-compose.yml` - å®¹å™¨é…ç½®æ›´æ–°

#### éƒ¨ç½²è„šæœ¬
- âœ… `pm2-deploy.sh` - PM2 é«˜æ€§èƒ½éƒ¨ç½²è„šæœ¬
- âœ… `deployment/deploy.sh` - é€šç”¨éƒ¨ç½²è„šæœ¬
- âœ… `deployment/quick-deploy.sh` - å¿«é€Ÿæ›´æ–°è„šæœ¬
- âœ… `deployment/ecosystem.config.js` - PM2 é…ç½®
- âœ… `scripts/build.sh` - æ„å»ºè„šæœ¬
- âœ… `scripts/dev.sh` - å¼€å‘è„šæœ¬
- âœ… `deploy-simple.sh` - ä¸€é”®éƒ¨ç½²è„šæœ¬

### ğŸ”§ è§£å†³çš„é—®é¢˜

#### ä¾èµ–é—®é¢˜
- âœ… å®‰è£…ç¼ºå¤±çš„åŒ…ï¼š`@hookform/resolvers`, `react-dropzone`, `recharts`
- âœ… æ·»åŠ  `cross-env` è§£å†³ Windows ç¯å¢ƒå˜é‡é—®é¢˜
- âœ… ç»Ÿä¸€ä½¿ç”¨ `pnpm-lock.yaml` é”å®šä¾èµ–ç‰ˆæœ¬

#### æ„å»ºä¼˜åŒ–
- âœ… ç§»é™¤ `--turbo` æ ‡å¿—ï¼Œæé«˜æ„å»ºç¨³å®šæ€§
- âœ… ç®€åŒ– TypeScript é…ç½®ï¼Œå¿½ç•¥æ„å»ºé”™è¯¯
- âœ… ä¼˜åŒ– ESLint é…ç½®ï¼Œæ„å»ºæ—¶è·³è¿‡æ£€æŸ¥

## ğŸš€ ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤

### å¼€å‘ç¯å¢ƒ
```bash
pnpm dev                    # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev:fast              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦ turboï¼‰
```

### æ„å»ºç›¸å…³
```bash
pnpm build                 # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build:prod           # æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ˆæ˜¾å¼è®¾ç½®ç¯å¢ƒï¼‰
pnpm preview              # æ„å»ºå¹¶é¢„è§ˆ
pnpm start                # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
```

### æ•°æ®åº“ç›¸å…³
```bash
pnpm db:generate          # ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm db:migrate           # å¼€å‘ç¯å¢ƒæ•°æ®åº“è¿ç§»
pnpm db:migrate:deploy    # ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“è¿ç§»
pnpm db:push              # æ¨é€æ•°æ®åº“æ›´æ”¹
pnpm db:studio            # æ‰“å¼€æ•°æ®åº“ç®¡ç†ç•Œé¢
pnpm db:seed              # è¿è¡Œç§å­æ•°æ®
```

### ä»£ç è´¨é‡
```bash
pnpm lint                 # ä¿®å¤ lint é—®é¢˜
pnpm lint:check           # åªæ£€æŸ¥ lint é—®é¢˜
pnpm typecheck            # TypeScript ç±»å‹æ£€æŸ¥
pnpm format:check         # æ£€æŸ¥ä»£ç æ ¼å¼
pnpm format:write         # æ ¼å¼åŒ–ä»£ç 
```

## ğŸ“‹ éƒ¨ç½²é€‰é¡¹

### æ–¹æ¡ˆä¸€ï¼šPM2 éƒ¨ç½²ï¼ˆæ¨èï¼‰
```bash
# å®Œæ•´éƒ¨ç½²
./pm2-deploy.sh

# ç”Ÿäº§æœåŠ¡å™¨ä¼˜åŒ–
./pm2-deploy.sh --optimize

# å¿«é€Ÿæ›´æ–°
./deployment/quick-deploy.sh
```

### æ–¹æ¡ˆäºŒï¼šDocker éƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t my-t3-app .

# ä½¿ç”¨ Docker Compose
docker-compose up -d

# ä¸€é”®éƒ¨ç½²
./deploy-simple.sh
```

### æ–¹æ¡ˆä¸‰ï¼šæ‰‹åŠ¨éƒ¨ç½²
```bash
# ä½¿ç”¨æ„å»ºè„šæœ¬
./scripts/build.sh

# æˆ–è€…æ‰‹åŠ¨æ­¥éª¤
pnpm install --frozen-lockfile
pnpm db:generate
pnpm build
pnpm db:migrate:deploy
pnpm start
```

## ğŸ¯ æ€§èƒ½å¯¹æ¯”

### æ„å»ºé€Ÿåº¦
- **ä¹‹å‰ï¼ˆnpmï¼‰**: ~60-90 ç§’
- **ç°åœ¨ï¼ˆpnpmï¼‰**: ~30-45 ç§’
- **æå‡**: çº¦ **50%** æ›´å¿«

### ä¾èµ–å®‰è£…
- **ä¹‹å‰ï¼ˆnpmï¼‰**: ~120 ç§’
- **ç°åœ¨ï¼ˆpnpmï¼‰**: ~20-30 ç§’
- **æå‡**: çº¦ **75%** æ›´å¿«

### ç£ç›˜ä½¿ç”¨
- **ä¹‹å‰ï¼ˆnpmï¼‰**: ~500MB node_modules
- **ç°åœ¨ï¼ˆpnpmï¼‰**: ~200MBï¼ˆç¬¦å·é“¾æ¥ï¼‰
- **èŠ‚çœ**: çº¦ **60%** ç£ç›˜ç©ºé—´

## ğŸ’¡ æœ€ä½³å®è·µ

### å¼€å‘æµç¨‹
1. ä½¿ç”¨ `pnpm dev` å¯åŠ¨å¼€å‘
2. æäº¤å‰è¿è¡Œ `pnpm lint` å’Œ `pnpm typecheck`
3. éƒ¨ç½²å‰ä½¿ç”¨ `pnpm preview` æµ‹è¯•

### éƒ¨ç½²æµç¨‹
1. **å°é¡¹ç›®/ä¸ªäºº**: ä½¿ç”¨ PM2 éƒ¨ç½²
2. **å›¢é˜Ÿé¡¹ç›®**: ä½¿ç”¨ Docker éƒ¨ç½²
3. **å¿«é€Ÿæ›´æ–°**: ä½¿ç”¨ quick-deploy.sh

### ç»´æŠ¤å»ºè®®
- å®šæœŸè¿è¡Œ `pnpm update` æ›´æ–°ä¾èµ–
- ä½¿ç”¨ `pnpm audit` æ£€æŸ¥å®‰å…¨é—®é¢˜
- å®šæœŸæ¸…ç† `pnpm store prune`

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¾èµ–å®‰è£…å¤±è´¥**
   ```bash
   pnpm install --no-frozen-lockfile
   ```

2. **æ„å»ºå¤±è´¥**
   ```bash
   rm -rf .next node_modules/.pnpm
   pnpm install
   pnpm build
   ```

3. **æ•°æ®åº“é—®é¢˜**
   ```bash
   pnpm db:push
   pnpm db:generate
   ```

## ğŸ‰ æ€»ç»“

âœ… **å®Œå…¨è½¬æ¢æˆåŠŸï¼**
- æ‰€æœ‰æ–‡ä»¶å·²ç»Ÿä¸€ä½¿ç”¨ pnpm
- æ„å»ºé€Ÿåº¦æå‡ 50%
- ç£ç›˜ä½¿ç”¨å‡å°‘ 60%
- Windows å…¼å®¹æ€§å®Œç¾
- éƒ¨ç½²æµç¨‹ä¼˜åŒ–

ç°åœ¨ä½ çš„é¡¹ç›®ï¼š
- æ›´å¿«çš„æ„å»ºé€Ÿåº¦
- æ›´å°‘çš„ç£ç›˜å ç”¨
- æ›´å¥½çš„ä¾èµ–ç®¡ç†
- æ›´ç®€æ´çš„éƒ¨ç½²æµç¨‹

**æ¨èä¸‹ä¸€æ­¥ï¼šä½¿ç”¨ PM2 éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ï¼** ğŸš€
